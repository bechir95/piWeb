{% extends 'base.html.twig' %}
{% block body %}


    <body class="account-register">
    <div id="page">

        <div id="account-register" class="container">
            <ul class="breadcrumb">
                <li><a href="{{path('service_homepage')}}"><i class="fa fa-home"></i></a></li>
                <li><a href="{{path('service_homepage')}}">Service</a></li>
                <li><a href="{{path('service_create')}}">create</a></li>
            </ul>
            <div class="row">
                <div id="content" class="col-sm-12">
                    <h1>Register Account</h1>
                    <p>have u new service to create ?</p>

                    {{ form_start(formulaire) }}
                        <fieldset id="account">
                            <legend>Your Personal Details</legend>

                            <div class="form-group required">
                                <label class="col-sm-2 control-label" >Libelle</label>
                                <div class="col-sm-10">
                                    {{ form_widget(formulaire.libelle) }}
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" >Description</label>
                                <div class="col-sm-10">
                                    {{ form_widget(formulaire.description) }}
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" >Prix</label>
                                <div class="col-sm-10">
                                    {{ form_widget(formulaire.prix) }}
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" >Gardener</label>
                                <div class="col-sm-10">
                                    {{form_widget(formulaire.gardener)}}
                                </div>
                            </div>
                        </fieldset>


                        <div class="buttons">
                            <div class="pull-right">I have read and agree to the <a href="" class="agree"><b>Privacy Policy</b></a>
                                <input type="checkbox" name="agree" value="1" />
                                &nbsp;
                                {{ form_widget(formulaire.Continue) }}
                            </div>
                        </div>
                    {{ form_end(formulaire) }}
                </div>
            </div>
        </div>

       {# faha mochkel !!!!!!!!!!!!!!!!!!!!!
        <script type="text/javascript"><!--
            // Sort the custom fields
            $('#account .form-group[data-sort]').detach().each(function() {
                if ($(this).attr('data-sort') >= 0 && $(this).attr('data-sort') <= $('#account .form-group').length) {
                    $('#account .form-group').eq($(this).attr('data-sort')).before(this);
                }

                if ($(this).attr('data-sort') > $('#account .form-group').length) {
                    $('#account .form-group:last').after(this);
                }

                if ($(this).attr('data-sort') == $('#account .form-group').length) {
                    $('#account .form-group:last').after(this);
                }

                if ($(this).attr('data-sort') < -$('#account .form-group').length) {
                    $('#account .form-group:first').before(this);
                }
            });

            $('input[name=\'customer_group_id\']').on('change', function() {
                $.ajax({
                    url: 'index.php?route=account/register/customfield&customer_group_id=' + this.value,
                    dataType: 'json',
                    success: function(json) {
                        $('.custom-field').hide();
                        $('.custom-field').removeClass('required');

                        for (i = 0; i < json.length; i++) {
                            custom_field = json[i];

                            $('#custom-field' + custom_field['custom_field_id']).show();

                            if (custom_field['required']) {
                                $('#custom-field' + custom_field['custom_field_id']).addClass('required');
                            }
                        }
                    },
                    error: function(xhr, ajaxOptions, thrownError) {
                        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                    }
                });
            });

            $('input[name=\'customer_group_id\']:checked').trigger('change');
            //--></script>
        #}

        <script type="text/javascript"><!--
            $('button[id^=\'button-custom-field\']').on('click', function() {
                var element = this;

                $('#form-upload').remove();

                $('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

                $('#form-upload input[name=\'file\']').trigger('click');

                if (typeof timer != 'undefined') {
                    clearInterval(timer);
                }

                timer = setInterval(function() {
                    if ($('#form-upload input[name=\'file\']').val() != '') {
                        clearInterval(timer);

                        $.ajax({
                            url: 'index.php?route=tool/upload',
                            type: 'post',
                            dataType: 'json',
                            data: new FormData($('#form-upload')[0]),
                            cache: false,
                            contentType: false,
                            processData: false,
                            beforeSend: function() {
                                $(element).button('loading');
                            },
                            complete: function() {
                                $(element).button('reset');
                            },
                            success: function(json) {
                                $(element).parent().find('.text-danger').remove();

                                if (json['error']) {
                                    $(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
                                }

                                if (json['success']) {
                                    alert(json['success']);

                                    $(element).parent().find('input').val(json['code']);
                                }
                            },
                            error: function(xhr, ajaxOptions, thrownError) {
                                alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                            }
                        });
                    }
                }, 500);
            });
            //--></script>
        <script type="text/javascript"><!--
            $('.date').datetimepicker({
                language: 'en-gb',
                pickTime: false
            });

            $('.time').datetimepicker({
                language: 'en-gb',
                pickDate: false
            });

            $('.datetime').datetimepicker({
                language: 'en-gb',
                pickDate: true,
                pickTime: true
            });
            //--></script>

    </div>

    <script type="text/javascript"><!--
        var tt_live_search = {
            selector: '#search input[name=\'search\']',
            text_no_matches: '',
            height: '50px'
        }

        $(document).ready(function() {
            var html = '';
            html += '<div class="live-search">';
            html += '	<ul>';
            html += '	</ul>';
            html += '<div class="result-text"></div>';
            html += '</div>';

            //$(tt_live_search.selector).parent().closest('div').after(html);
            $(tt_live_search.selector).after(html);

            $(tt_live_search.selector).autocomplete({
                'source': function(request, response) {
                    var filter_name = $(tt_live_search.selector).val();
                    var cat_id = 0;
                    var module_tt_live_search_min_length = '1';
                    if (filter_name.length < module_tt_live_search_min_length) {
                        $('.live-search').css('display','none');
                    }
                    else{
                        var html = '';
                        html += '<li style="text-align: center;height:10px;">';
                        html +=	'<img class="loading" src="image/catalog/demo/banners/loading.gif" />';
                        html +=	'</li>';
                        $('.live-search ul').html(html);
                        $('.live-search').css('display','block');

                        $.ajax({
                            url: 'index.php?route=extension/module/tt_live_search&filter_name=' +  encodeURIComponent(filter_name),
                            dataType: 'json',
                            success: function(result) {
                                var products = result.products;
                                $('.live-search ul li').remove();
                                $('.result-text').html('');
                                if (!$.isEmptyObject(products)) {
                                    var show_image = 1;
                                    var show_price = 1;
                                    var show_description = 0;
                                    $('.result-text').html('<a href="https://demo.templatetrip.com/Opencart/OPC06/OPC190_nursery/OPC02/index.php?route=product/search&amp;search='+filter_name+'" class="view-all-results">   View all results    ('+result.total+')</a>');

                                    $.each(products, function(index,product) {
                                        var html = '';

                                        html += '<li>';
                                        html += '<a href="' + product.url + '" title="' + product.name + '">';
                                        if(product.image && show_image){
                                            html += '	<div class="product-image col-sm-4 col-xs-4"><img alt="' + product.name + '" src="' + product.image + '"></div>';
                                        }
                                        html += '<div class="search-description col-sm-8 col-xs-8">';
                                        html += '	<div class="product-name">' + product.name ;
                                        if(show_description){
                                            html += '<p>' + product.extra_info + '</p>';
                                        }
                                        html += '</div>';
                                        if(show_price){
                                            if (product.special) {
                                                html += '	<div class="product-price"><span class="special">' + product.price + '</span><span class="price">' + product.special + '</span></div>';
                                            } else {
                                                html += '	<div class="product-price"><span class="price">' + product.price + '</span></div>';
                                            }
                                        }
                                        html += '</div>';
                                        html += '<span style="clear:both"></span>';
                                        html += '</a>';
                                        html += '</li>';
                                        $('.live-search ul').append(html);
                                    });
                                } else {
                                    var html = '';
                                    html += '<li style="text-align: center;height:10px;">';
                                    html +=	tt_live_search.text_no_matches;
                                    html +=	'</li>';

                                    $('.live-search ul').html(html);
                                }
                                $('.live-search').css('display','block');
                                return false;
                            }
                        });
                    }
                },
                'select': function(product) {
                    $(tt_live_search.selector).val(product.name);
                }
            });

            $(document).bind( "mouseup touchend", function(e){
                var container = $('.live-search');
                if (!container.is(e.target) && container.has(e.target).length === 0)
                {
                    container.hide();
                }
            });
        });
        //--></script>

{% endblock %}